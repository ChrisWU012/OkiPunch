{{!-- link to calendar css to change theme --}}

<head>
    <link rel="stylesheet" type="text/css"
        href="https://cdn.jsdelivr.<net/npm/evo-calendar@1.1.2/evo-calendar/css/evo-calendar.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../../library/calendar/evo-calendar.orange-coral.min.css">
    <link rel="stylesheet" type="text/css" href="../../../../library/calendar/evo-calendar.midnight-blue.min.css">
    <link rel="stylesheet" type="text/css" href="../../../../library/calendar/evo-calendar.royal-navy.min.css">
</head>



{{!-- body --}}
<section id="demos">
    <div class="section-content">
        <div class="log-content">
            <div class="--noshadow" id="evoCalendarCom"></div>
        </div>
        <br>
        <div class="d-flex justify-content-center align-items-center">
            <button type="button" class="btn" id="editBtn" style="background-color: #edae0f; color: white"><i
                    class="fa-regular fa-pen-to-square"></i> Edit</button>
        </div>

        {{!-- <div class="action-buttons d-flex justify-content-center align-items-center">
            <button type="button" class="editBtn btn btn-action" id="addBtn">ADD EVENT</button>
            <button type="button" class="deleteBtn btn-action" id="removeBtn" disabled>REMOVE EVENT</button>
        </div> --}}

        <br>

        {{!-- hidden update form --}}
        <form id="formPostCal" method="post" target="hiddenFrame">
            
            <div class="card" id="card" style="visibility: hidden; border:black">
                <div class="mb-3">
                    <label for="inputDate" class="form-label">Chooseing the date you want to update</label>
                    <input name="in_date" type="date" class="form-control" id="inputDate"
                        placeholder="name@example.com">
                </div>
                <div class="mb-3">
                    <label for="editInTime" class="form-label">Chooseing the in time you want to update</label>
                    <textarea name="in_time" class="form-control" id="editInTime" rows="3"></textarea>
                </div>
                <div class="mb-3">
                    <label for="editOutTime" class="form-label">Chooseing the out time you want to update</label>
                    <textarea name="out_time" class="form-control" id="editOutTime" rows="3"></textarea>
                </div>




                <div class="mb-3">
                    <label for="inputDate" class="form-label">Date</label>
                    <input name="in_date" type="date" class="form-control" id="inputDate"
                        placeholder="name@example.com">
                </div>
                <div class="mb-3">
                    <label for="editStatus" class="form-label">Status</label>
                    <input name="status" type="text" class="form-control" id="editStatus" rows="3"></input>
                </div>
                <div class="mb-3">
                    <label for="editInTime" class="form-label">In time</label>
                    <textarea name="in_time" class="form-control" id="editInTime" rows="3"></textarea>
                </div>
                <div class="mb-3">
                    <label for="editOutTime" class="form-label">Out time</label>
                    <textarea name="out_time" class="form-control" id="editOutTime" rows="3"></textarea>
                </div>
                <button type="submit" class="btn bg-light" id="submitBtn"> <i class="fa-regular fa-circle-check"></i>
                    Submit
                </button>
                <br>
            </div>
        </form>

    </div>
    <br>
</section>



{{!-- showing the edit form--}}
<script>
    document.getElementById("editBtn").onclick = function () {
        var card = document.getElementById("card");
        card.style.visibility = "visible";
    }

    document.getElementById("submitBtn").onclick = function () {
        var card = document.getElementById("card");
        card.style.visibility = "hidden";
    }
</script>



{{!-- compamny calendar - show data --}}
<script>
    let id;

    id = window.location.href.split('/worker')[1].split('/')[1];

    $.ajax({
        type: "GET",
        url: `http://localhost:8000/biz/worker/${id}/calendar/api`,
        async: true,
        success: function (result) {

            console.log(result);

            let status_id;
            let cal_array = []
            for (let c = 0; c < result.date.length; c++) {
                if (result.status[c] == "ON_TIME") {
                    status_id = "1";
                } else if (result.status[c] == "LATE") {
                    status_id = "2";
                } else if (result.status[c] == "ABSENT") {
                    status_id = "3";
                } else if (result.status[c] == "EARLY GOING") {
                    status_id = "4";
                } else if (result.status[c] == "HALF DAY") {
                    status_id = "5";
                }

                cal_array.push({
                    id: status_id,//staff_id
                    name: result.status[c],//"Punctual", "Late", "Absence"
                    description: result.description[c],//additional information e.g.late/absence reason
                    date: result.date[c], //default format: February/15/1999  ,or  [ today.getMonth() + 1 + "/" + week_date.start + "/" + today.getFullYear(), today.getMonth() + 1 + "/" + week_date.end + "/" + today.getFullYear() ]
                    type: "event", //"punctual", "late", "absence" // color according to the type
                })

                c = c++
            }

            $("#evoCalendarCom").evoCalendar({
                format: "yyyy/mm/dd", // default format: MM dd, yyyy
                titleFormat: "MM",
                theme: "Royal Navy", //Midnight Blue, Orange Coral, Royal Navy
                calendarEvents:
                    cal_array
            });
        }
    });
</script>



{{!-- compamny_calendar - edit data --}}
<script>

</script>



{{!-- link to company calendar setting js --}}
<script src="../../../../company_calendar.js"></script>